(this.webpackJsonpexercise1=this.webpackJsonpexercise1||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(13),u=t.n(o),c=t(14),l=t(2),i=function(e){var n=e.persons,t=e.filter,r=e.deleteContact;return a.a.createElement(a.a.Fragment,null,n.filter((function(e){return""===t?e:-1!==e.name.toLowerCase().search(t.toLowerCase())})).map((function(e){return a.a.createElement("p",{key:e.name},e.name," ",e.number," ",a.a.createElement("button",{onClick:function(){return r(e.id)}},"delete"))})))},m=function(e){var n=e.personHandler,t=e.nameHandler,r=e.numberHandler,o=e.nameRef,u=e.numberRef;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{ref:o,placeholder:"your name",onChange:t})),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{ref:u,placeholder:"your number",onChange:r})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.filterHandler;return a.a.createElement("div",null,"filter shown with:"," ",a.a.createElement("input",{placeholder:"find a person",onChange:n}))},d=function(e){var n=e.message,t=e.error?{color:"red",backgroundColor:"lightgrey",padding:"10px",marginBottom:"20px",border:"2px solid red",borderRadius:"3px",maxWidth:"500px",fontSize:16}:{color:"green",backgroundColor:"lightgrey",padding:"10px",marginBottom:"20px",border:"2px solid green",borderRadius:"3px",maxWidth:"500px",fontSize:16};return null===n?null:a.a.createElement("div",{style:t},n)},s=t(3),b=t.n(s),h="/api/persons",p=function(){return b.a.get(h).then((function(e){return e.data}))},g=function(e){return b.a.post(h,e).then((function(e){return e.data}))},E=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return b.a.delete("".concat(h,"/").concat(e))},w=function(){var e={},n={},t=Object(r.useState)([]),o=Object(l.a)(t,2),u=o[0],s=o[1],b=Object(r.useState)(""),h=Object(l.a)(b,2),w=h[0],x=h[1],j=Object(r.useState)(""),C=Object(l.a)(j,2),O=C[0],y=C[1],S=Object(r.useState)(""),k=Object(l.a)(S,2),H=k[0],R=k[1],L=Object(r.useState)(null),T=Object(l.a)(L,2),B=T[0],I=T[1],z=Object(r.useState)(null),A=Object(l.a)(z,2),J=A[0],W=A[1];Object(r.useEffect)((function(){p().then((function(e){return s(e)}))}),[]);var D=function(){e.value="",n.value="",x(""),y("")},F=function(e){var n=-1,t={},r=u.some((function(e){return e.name.toLowerCase()===w.toLowerCase()&&(t=e,n=e.id,console.log(n,"presentedId"),!0)}));r?window.confirm("".concat(w," is already added to phonebook, replace the old number with a new one?"))&&E(n,Object(c.a)({},t,{number:O})).then((function(){D(),p().then((function(e){return s(e)}))})).then((function(){I("Contact ".concat(t.name," has been updated")),setTimeout((function(){I(null)}),3e3)})).catch((function(e){W("Information of ".concat(t.name," has already been removed from server")),p().then((function(e){return s(e)})),setTimeout((function(){W(null)}),3e3)})):g(e).then((function(){D(),p().then((function(e){return s(e)}))})).then((function(){I("Contact ".concat(e.name," has been created")),setTimeout((function(){I(null)}),3e3)})).catch((function(e){W(e.response.data.error),p().then((function(e){return s(e)})),setTimeout((function(){W(null)}),3e3)}))};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(f,{filterHandler:function(e){R(e.target.value)}}),a.a.createElement("h2",null,"Add a new"),a.a.createElement(d,{message:B,error:!1}),a.a.createElement(d,{message:J,error:!0}),a.a.createElement(m,{personHandler:function(e){e.preventDefault(),F({name:w,number:O})},nameHandler:function(e){x(e.target.value)},numberHandler:function(e){y(e.target.value)},nameRef:function(n){return e=n},numberRef:function(e){return n=e}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(i,{persons:u,filter:H,deleteContact:function(e){window.confirm("Are you sure you want to delete a contact?")&&v(e).then((function(){return p().then((function(e){return s(e)}))}))}}))};u.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.81c3de78.chunk.js.map